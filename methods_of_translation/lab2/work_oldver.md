# 2-ая лабораторная по методам трансляции
### 4 вариант. Логические формулы с множествами в стиле Python
Логические формулы. Используются операции and, or, xor, not, in. \
Приоритет операций стандартный. Скобки могут использоваться для изменения приоритета. Предусмотреть возможность оператора not in. \
В качестве операндов выступают переменные с именем из одной буквы. Используйте один терминал для всех переменных. Для каждой логической операции должен быть заведен один терминал (не три ‘a’, ‘n’, ‘d’ для and). \
Пример: `(a in b) or (c not in b)`



### Анализ и ввод правил 
Будем считать за аналоги:
- `and` как операция `&`
- `or` как операция `|`
- `xor` как операция `^`

Переменные могут быть как множествами, так и булевскими значениями.

Примечания (alias: _ = Bool/Set):
- _ not not in _ -> ERROR
- not _ -> Bool
- _ /in/not in/ Set -> Bool
- _ /in/not in/ Bool -> ERROR
- Bool /xor/or/and/ Set -> ERROR
- Set /xor/or/and/ Bool -> ERROR

Все данные выше были получены опытным путём с Python 3.x. Все бинарные операции между Bool и Set учтены в примечании. Для всех остальных операций из одного типа будет выдаваться тот же тип: `A op A -> A`

## 1 пункт
### Построим грамматику

```
I -> B
I -> X
___________________________
B -> E
B -> B xor E

E -> T
E -> E or T

T -> P
T -> T and P

P -> not P
P -> not S
P -> V in S
P -> V not in S
P -> S in S
P -> S not in S
P -> V

V -> (B)
V -> var 
______________________
X -> O
X -> X xor O

O -> A
O -> O or A

A -> S
A -> A and S

S -> (X)
S -> var

```

Избавимся от левых рекурсий и правых ветвлений:

```
I -> B
I -> X
___________________________
B -> EB'
B' -> ε
B' -> xor EB'

E -> TE'
E' -> ε
E' -> or TE'

T -> PT'
T' -> ε
T' -> and PT'

P -> not P'
P -> VV'
P -> SS'
P' -> P
P' -> S
V' -> in S
V' -> not in S
V' -> ε
S' -> in S
S' -> not in S

V -> (B)
V -> var 
______________________
X -> OX'
X' -> ε
X' -> xor OX'

O -> AO'
O' -> ε
O' -> or AO'

A -> SA'
A' -> ε
A' -> and SA'

S -> (X)
S -> var

```

Описание нетерминалов:

| Нетерминал | Описание                                                                                                                                          |
|------------|---------------------------------------------------------------------------------------------------------------------------------------------------|
| I          | Стартовый нетерминал, ожидает булевское выражение или выражение-множество                                                                         |
| B          | Объединённое xor булевское выражение                                                                                                              |
| B'         | Продолжение объединённого xor булевского выражения                                                                                                |
| E          | Объединённое or булевское выражение                                                                                                               |
| E'         | Продолжение объединённого or булевского выражения                                                                                                 |
| T          | Объединённое and булевское выражение                                                                                                              |
| T'         | Продолжение объединённого and булевского выражения                                                                                                |
| P          | Соединяющее not булевское выражение, ожидаемое конечное булевское значение, ожидаемое булевское значение из операций /in/not in/ с разными типами |
| P'         | Нетерминал для использования not над булевским выражением/выражением-множеством                                                                   |
| V'         | Нетерминал использования и/или неиспользования операций in/not in с первым аргументом булевского выражения                                        |
| S'         | Нетерминал использования операций in/not in с первым аргументом выражения-множества                                                               |
| V          | Булева переменная, булево выражение в скобках                                                                                                     |
| X          | Объединённое xor выражение-множество                                                                                                              |
| X'         | Продолжение объединённого xor выражения-множество                                                                                                 |
| O          | Объединённое or выражение-множество                                                                                                               |
| O'         | Продолжение объединённого or выражения-множество                                                                                                  |
| A          | Объединённое and выражение-множество                                                                                                              |
| A'         | Продолжение объединённого and выражения-множество                                                                                                 |
| S          | Переменная-множество, выражение-множество в скобках                                                                                               |


## Пункт 3

Построим множества FIRST и FOLLOW для нетерминалов нашей грамматики

| Нетерминал | FIRST      | FOLLOW                |
|------------|------------|-----------------------|
| I          | var ( not  | $                     |
| B          | var ( not  | $ )                   |
| B'         | xor ε      | $ )                   |
| E          | var ( not  | $ ) xor               |
| E'         | or ε       | $ ) xor               |
| T          | var ( not  | $ ) xor or            |
| T'         | and ε      | $ ) xor or            |
| P          | var ( not  | $ ) xor or and        |
| P'         | var ( not  | $ ) xor or and        |
| V'         | not in ε   | $ ) xor or and        |
| S'         | not in     | $ ) xor or and        |
| V          | var (      | $ ) xor or and not in |
| X          | var (      | $ )                   |
| X'         | xor ε      | $ )                   |
| O          | var (      | $ ) xor               |
| O'         | or ε       | $ ) xor               |
| A          | var (      | $ ) xor or            |
| A'         | and ε      | $ ) xor or            |
| S          | var (      | $ ) xor or and not in |

## Эта грамматика не является LL(1):
#### Из-за нарушения правил LL(1) для нетерминалов `I, P, P'`